From 6356a6907d91057e9742ddf726e4d081acc519aa Mon Sep 17 00:00:00 2001
From: Alexander Graf <agraf@suse.de>
Date: Mon, 20 Aug 2012 00:07:13 +0200
Subject: [PATCH 025/169] linux-user: implement FS_IOC_SETFLAGS ioctl

Signed-off-by: Alexander Graf <agraf@suse.de>

---

v1 -> v2

  - use TYPE_LONG instead of TYPE_INT
---
 linux-user/ioctls.h       | 1 +
 linux-user/syscall_defs.h | 1 +
 2 files changed, 2 insertions(+)

Index: qemu-1.6.0+dfsg/linux-user/ioctls.h
===================================================================
--- qemu-1.6.0+dfsg.orig/linux-user/ioctls.h	2013-11-05 22:23:20.711422341 +0000
+++ qemu-1.6.0+dfsg/linux-user/ioctls.h	2013-11-05 22:23:20.699422371 +0000
@@ -87,6 +87,7 @@
                    MK_PTR(MK_STRUCT(STRUCT_fiemap)))
 #endif
   IOCTL(FS_IOC_GETFLAGS, IOC_R, MK_PTR(TYPE_LONG))
+  IOCTL(FS_IOC_SETFLAGS, IOC_W, MK_PTR(TYPE_LONG))
 
   IOCTL(SIOCATMARK, 0, TYPE_NULL)
   IOCTL(SIOCGIFNAME, IOC_RW, MK_PTR(TYPE_INT))
Index: qemu-1.6.0+dfsg/linux-user/syscall_defs.h
===================================================================
--- qemu-1.6.0+dfsg.orig/linux-user/syscall_defs.h	2013-11-05 22:23:20.711422341 +0000
+++ qemu-1.6.0+dfsg/linux-user/syscall_defs.h	2013-11-05 22:23:20.707422351 +0000
@@ -2392,6 +2392,7 @@
 #define TARGET_MTIOCPOS        TARGET_IOR('m', 3, struct mtpos)
 
 #define TARGET_FS_IOC_GETFLAGS TARGET_IORU('f', 1)
+#define TARGET_FS_IOC_SETFLAGS TARGET_IOWU('f', 2)
 
 struct target_sysinfo {
     abi_long uptime;                /* Seconds since boot */
